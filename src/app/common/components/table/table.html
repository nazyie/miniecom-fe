<div class="w-full flex flex-col items-center gap-4">
  <!-- Table Wrapper with Horizontal Scroll -->
  <div class="w-full overflow-x-auto">
    <table class="table table-zebra table-fixed border border-base-300 w-full min-w-[600px]">
      <thead class="bg-base-200">
        <tr>
          @for(col of columns; track col.name) {
            <th>{{ col.name }}</th>
          }
        </tr>
      </thead>
      <tbody>
        @for(row of data; track row.id) {
        <tr class="hover:bg-base-300 cursor-pointer" (click)="onRowClick(row)">
          @for (col of columns; track col.key) {
            <td>
              @switch (col.transformer) {
                @case ('date') { <span>{{ row[col.key] | date }}</span> }
                @default () { <span>{{ row[col.key] }}</span> }
              }
            </td>
          }
        </tr>
        }
        @empty {
          <div class="text-center text-sm text-gray-500 p-4">
            Tiada Data. Mula cipta rekod sekarang!
          </div>
        }
      </tbody>
    </table>
  </div>
</div>

<!-- Pagination Controls -->
<div class="w-full mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-end gap-4 px-4">
  <!-- Page Size Dropdown -->
  <div class="flex flex-col sm:flex-row sm:items-center gap-2">
    <label for="pageSize" class="text-sm font-medium">Lihat Rekod</label>
    <select id="pageSize" class="select select-bordered select-sm w-full sm:w-auto" [(ngModel)]="pageSize"
      (change)="onPageSizeChange()">
      <option [value]="5">5</option>
      <option [value]="10">10</option>
      <option [value]="20">20</option>
      <option [value]="50">50</option>
    </select>
  </div>

  <!-- Page Navigation -->
  <div class="flex flex-wrap items-center gap-2 justify-end">
    <button class="btn btn-sm rounded-4xl btn-primary" [disabled]="page === 0" (click)="previousPage()">‹</button>
    <span class="text-sm">{{ page + 1 }} | {{ totalPage }}</span>
    <button class="btn btn-sm rounded-4xl btn-primary" [disabled]="page + 1 >= totalPage" (click)="nextPage()">›</button>
  </div>
</div>
